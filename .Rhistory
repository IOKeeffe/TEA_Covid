CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors)
View(esc_error_counts)
esc_error_counts <- esc_enrollment_data %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, ENROLLMENT)) %>%
mutate(undercounted_crisis_students = subtraction_filter(ENROLLMENT, total_crisis_students)) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
summarize(
REGION,
ENROLLMENT,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors,
groups="KEEP")
esc_error_counts <- esc_enrollment_data %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors,
groups="KEEP")
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors,
groups="KEEP") %>%
distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors,
groups="keep")
esc_error_counts <- esc_enrollment_data %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors,
.groups="keep")
esc_error_counts <- esc_enrollment_data %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors,
.groups="rowwise")
test <- esc_enrollment_data %>%
filter(STUDENT.COUNT == -999) %>%
esc_error_counts <- esc_enrollment_data %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors,
.groups="rowwise")
test <- esc_enrollment_data %>%
filter(STUDENT.COUNT == -999)
View(test)
test <- esc_enrollment_data %>%
filter(STUDENT.COUNT != -999)
test <- esc_enrollment_data %>%
filter(STUDENT.COUNT != -999) %>%
group_by(REGION) %>%
summarize(
total_students = sum(STUDENT.COUNT)
)
View(test)
View(esc_enrollment_data)
sum(esc_enrollment_data$ENROLLMENT)
View(esc_region_data)
View(raw_enrollment_data)
View(statewide_enrollment_data)
esc_enrollment_data <- merge(esc_district_data, enrollment_data, by="DISTRICT") %>%
transform(STUDENT.COUNT = as.numeric(gsub(",","",STUDENT.COUNT)))
district_enrollment_data
esc_enrollment_data <- merge(esc_district_data, enrollment_data, by="DISTRICT") %>%
transform(STUDENT.COUNT = as.numeric(gsub(",","",STUDENT.COUNT)))
esc_enrollment_data <- merge(esc_district_data, district_enrollment_data, by="DISTRICT") %>%
transform(STUDENT.COUNT = as.numeric(gsub(",","",STUDENT.COUNT)))
district_enrollment_data <- raw_enrollment_data %>%
transform(ENROLLMENT = as.numeric(ENROLLMENT)) %>%
group_by(DISTRICT) %>%
summarize(ENROLLMENT = sum(ENROLLMENT))
esc_enrollment_data <- merge(esc_district_data, district_enrollment_data, by="DISTRICT") %>%
transform(STUDENT.COUNT = as.numeric(gsub(",","",STUDENT.COUNT)))
statewide_crisis_data <- merge(crisis_data, district_enrollment_data, by="DISTRICT") %>%
transform(STUDENT.COUNT = as.numeric(gsub(",","",STUDENT.COUNT)))
esc_error_counts <- esc_enrollment_data %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors,
.groups="rowwise")
View(statewide_crisis_data)
View(esc_error_counts)
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>%
distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>%
distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
ungroup %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>%
distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
ungroup %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>%
distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by(REGION) %>%
group_by(DISTRICT) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
ungroup(DISTRICT) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>%
distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
mutate(enrollment = sum(ENROLLMENT)) %>%
ungroup(DISTRICT) %>%
group_by(REGION) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>%
distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup(DISTRICT) %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment))
esc_error_counts <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup(DISTRICT) %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment))
esc_error_counts <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup(DISTRICT) %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment))
View(esc_error_counts)
esc_error_counts <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment))
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors)
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors)
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>% distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment)) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>% distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment)) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>% distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment)) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>% distinct()
View(esc_enrollment_data)
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT))
View(esc_error_counts)
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment))
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment)) %>%
ungroup() %>%
mutate(total_enrollment = sum(enrollment))
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by(-CRISIS.CODE, -CRISIS.CODEX, REGION) %>%
mutate(enrollment = sum(district_enrollment)) %>%
ungroup()
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by_at(var(-CRISIS.CODE, -CRISIS.CODEX, REGION)) %>%
mutate(enrollment = sum(district_enrollment)) %>%
ungroup()
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, REGION)) %>%
mutate(enrollment = sum(district_enrollment)) %>%
ungroup()
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, REGION)) %>%
mutate(enrollment = sum(district_enrollment)) %>%
ungroup()
o
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
# ungroup() %>%
# group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, REGION)) %>%
# mutate(enrollment = sum(district_enrollment)) %>%
# ungroup()
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(-CRISIS.CODE, -CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by(REGION) %>%
mutate(enrollment = sum(district_enrollment)) %>%
mutate(total_crisis_students = sum(STUDENT.COUNT[STUDENT.COUNT != -999])) %>%
mutate(region_errors = sum(STUDENT.COUNT == -999)) %>%
mutate(overcounted_crisis_students = subtraction_filter(total_crisis_students, enrollment)) %>%
mutate(undercounted_crisis_students = subtraction_filter(enrollment, total_crisis_students)) %>%
summarize(
REGION,
enrollment,
total_crisis_students,
CRISIS.CODE,
CRISIS.CODEX,
overcounted_crisis_students,
undercounted_crisis_students,
region_errors) %>% distinct()
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT))
source('~/R/TEA_Covid/tea_reports.R')
source('~/R/TEA_Covid/tea_reports.R')
source('~/R/TEA_Covid/tea_reports.R')
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, REGION)) %>%
mutate(enrollment = sum(district_enrollment)) %>%
ungroup()
source('~/R/TEA_Covid/tea_reports.R')
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, DISTRICT, REGION)) %>%
mutate(enrollment = sum(district_enrollment)) %>%
ungroup()
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, DISTRICT, REGION)) %>%
mutate(enrollment = sum(district_enrollment)) %>%
ungroup()
source('~/R/TEA_Covid/tea_reports.R')
esc_error_counts <- esc_enrollment_data %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, DISTRICT)) %>%
mutate(district_enrollment = sum(ENROLLMENT)) %>%
ungroup() %>%
group_by_at(vars(CRISIS.CODE, CRISIS.CODEX, DISTRICT, REGION)) %>%
mutate(enrollment = sum(district_enrollment)) %>%
ungroup()
source('~/R/TEA_Covid/tea_reports.R')
source('~/R/TEA_Covid/tea_reports.R')
test <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
summarize(.groups="keep")
test <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
summarize(.groups="keep")
View(test)
View(test)
test <- esc_enrollment_data %>%
group_by(DISTRICT) %>%
summarize(.groups="keep")
