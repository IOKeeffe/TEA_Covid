tea_data <- read_csv2("artf354001_Part2_District_Crisis")
source('~/R/tea/scratchpad.R', echo=TRUE)
tea_data <- read.csv2("artf354001_Part2_District_Crisis")
tea_data <- read.csv2("artf354001_Part2_District_Crisis.csv")
View(tea_data)
View(tea_data)
head(tea_data)
tea_data <- read.csv2("artf354001_Part2_District_Crisis.csv", F)
tea_data <- read.csv2("artf354001_Part2_District_Crisis.csv", F)
head(tea_data)
tea_data <- read.csv2("artf354001_Part2_District_Crisis.csv", header=F)
head(tea_data)
tea_data <- read.csv2("artf354001_Part2_District_Crisis.csv", header=T)
head(tea_data)
tea_data <- read.csv2("artf354001_Part2_District_Crisis.csv", header=T)
head(tea_data)
tea_data <- read.csv2("artf354001_Part2_District_Crisis.csv", stringsAsFactors=FALSE)
View(tea_data)
View(tea_data)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
View(tea_data)
tea_data %>%
group_by(DISTRICT.NAME)
tea_data %>%
group_by(DISTRICT.NAME)
library(dplyr)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
tea_data %>%
group_by(DISTRICT.NAME)
tea_data %>%
group_by(DISTRICT.NAME) %>%
sort_by(STUDENT.COUNT)
tea_data %>%
group_by(DISTRICT.NAME) %>%
sort(STUDENT.COUNT)
tea_data %>%
group_by(DISTRICT.NAME) %>%
order_by(STUDENT.COUNT)
tea_data %>%
group_by(DISTRICT.NAME) %>%
arragne(STUDENT.COUNT)
tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(STUDENT.COUNT)
tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(STUDENT.COUNT, DESC)
tea_data %>%
group_by(DISTRICT.NAME) %>%
order(STUDENT.COUNT)
tea_data %>%
group_by(DISTRICT.NAME) %>%
order(STUDENT.COUNT)
tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(STUDENT.COUNT, decreasing=T)
tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(STUDENT.COUNT, decreasing=F)
tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(asc(STUDENT.COUNT))
tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(asc(STUDENT.COUNT))
tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(STUDENT.COUNT)
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(STUDENT.COUNT)
View(t2)
t2 <- tea_data %>%
group_by(DISTRICT.NAME)
View(tea_data)
t2 <- tea_data %>%
group_by(DISTRICT)
View(t2)
library(dplyr)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
t2 <- tea_data %>%
group_by(DISTRICT)
View(tea_data)
t2 <- tea_data %>%
group_by(DISTRICT)
t2 <- tea_data %>%
order_by(STUDENT.COUNT)
t2 <- tea_data %>%
arrange(STUDENT.COUNT)
View(t2)
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(STUDENT.COUNT)
library(dplyr)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
arrange(STUDENT.COUNT)
View(t2)
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 10000)
t2 <- tea_data %>%
filter(STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 10000)
t2 <- tea_data %>%
mutate_at(STUDENT.COUNT,
funs(factor))
t2 <- tea_data %>%
mutate_at(vars(STUDENT.COUNT),
funs(factor))
t2 <- tea_data %>%
mutate_at(vars(STUDENT.COUNT),
list(factor))
t2 <- tea_data %>%
filter(STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 10000)
t2 <- tea_data %>%
filter(STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
t2 <- tea_data %>%
filter(STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
unique(CRISIS.CODEX)
as.character(unique(unlist(t2)))
t2 <- tea_data %>%
filter(STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
unique(unlist(CRISIS.CODEX))
t2 <- tea_data %>%
filter(STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
unique(unlist(tea_data))
#arrange(STUDENT.COUNT)
#group_by(DISTRICT)
#as.character(unique(unlist(df)))
unique(c(t2$CRISIS.CODEX))
View(tea_data)
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
t2
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
t2
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
t2
library(tidyverse)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
t2
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
t2
library(tidyverse)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
t2
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
t2
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
library(tidyverse)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
t2
View(t2)
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
group_by(CRISIS.CODE)
t2
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
group_by(CRISIS.CODE) %>%
table(CRISIS.CODE)
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
group_by(CRISIS.CODE) %>%
table(t2$CRISIS.CODE)
table(t2$CRISIS.CODE)
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
group_by(CRISIS.CODE)
table(t2$CRISIS.CODE)
table(t2$CRISIS.CODEX)
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
mutate(percent = STUDENT.COUNT/sum(STUDENT.COUNT))
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
transform(percent = ave(STUDENT.COUNT, DISTRICT.NAME, FUN = prop.table))
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
transform(percent = ave(STUDENT.COUNT, DISTRICT.NAME, FUN = prop.table))
t2 <- tea_data %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
transform(percent = ave(STUDENT.COUNT, CRISIS.CODE, FUN = prop.table))
transform(t2, percent = ave(STUDENT.COUNT, CRISIS.CODE, FUN = prop.table))
t2$STUDENT.COUNT
#tea_data[] <- lapply(tea_data, function(x) as.numeric(as.character(x)))
sapply(tea_data, mode)
transform(tea_data, STUDENT.COUNT = as.numeric(STUDENT.COUNT))
sapply(tea_data, mode)
transform(tea_data, STUDENT.COUNT = as.numeric(STUDENT.COUNT))
sapply(tea_data, mode)
View(tea_data)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT))
sapply(tea_data, mode
sapply(t2, mode)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT))
sapply(t2, mode)
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
transform(t2, percent = ave(STUDENT.COUNT, CRISIS.CODE, FUN = prop.table))
View(t2)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(isNA(STUDENT.COUNT)) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000) %>%
transform(t2, percent = ave(STUDENT.COUNT, CRISIS.CODE, FUN = prop.table))
View(t2)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(isNA(STUDENT.COUNT)) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
# filter(isNA(STUDENT.COUNT)) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
# filter(isNA(STUDENT.COUNT)) %>%
# group_by(DISTRICT.NAME) %>%
# filter(STUDENT.COUNT > 50000)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
View(t2)
View(tea_data)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) #%>%
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(isNA(STUDENT.COUNT)) %>%
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(isNA(STUDENT.COUNT)) #%>%
View(t2)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!isNA(STUDENT.COUNT)) #%>%
View(t2)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!isNA(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!isNA(STUDENT.COUNT)&STUDENT.COUNT != -999) #%>%
View(tea_data)
View(t2)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!isNA(STUDENT.COUNT)&STUDENT.COUNT != -999) #%>%
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!isNA(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!isNA(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(STUDENT.COUNT > 50000)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) #%>%
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
filter(sum(STUDENT.COUNT) > 50000)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
aggregate(STUDENT.COUNT, by=list(DISTRICT.NAME), FUN=sum)
t2 <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
aggregate(STUDENT.COUNT, by=list(DISTRICT.NAME), FUN=sum)
district_aggregates <- aggregate(district_aggregates, by=list(DISTRICT.NAME), FUN=sum)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999)
district_aggregates <- aggregate(district_aggregates, by=list(DISTRICT.NAME), FUN=sum)
district_aggregates <- aggregate(district_aggregates, by=list(district_aggregates$DISTRICT.NAME), FUN=sum)
district_aggregates <- aggregate(district_aggregates, by=list(district_aggregates$STUDENT.COUNT), FUN=sum)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999)
district_aggregates <- aggregate(district_aggregates, by=list(district_aggregates$STUDENT.COUNT), FUN=sum)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999)
aggregate(district_aggregates, by=list(district_aggregates$STUDENT.COUNT), FUN=sum)
sapply(district_aggregates)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999)
sapply(district_aggregates)
sapply(district_aggregates)
sapply(district_aggregates, class)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
summarise(STUDENT.COUNT = sum(STUDENT.COUNT))
View(district_aggregates)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
summarise(STUDENT.COUNT = sum(STUDENT.COUNT)) %>%
head(10)
View(district_aggregates)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
summarise(STUDENT.COUNT = sum(STUDENT.COUNT))
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT))
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(proc = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100))
View(district_aggregates)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100))
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100)) %>%
summarise(DISTRICT.NAME)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100)) %>%
summarise(DISTRICT.NAME, CRISIS.CODEX, percent)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
head(20) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100)) %>%
summarise(DISTRICT.NAME, CRISIS.CODEX, percent)
district_aggregates <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999) %>%
group_by(DISTRICT.NAME) %>%
# arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100)) %>%
summarise(DISTRICT.NAME, CRISIS.CODEX, percent)
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
cleaned_data <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999)
district_percentages <- cleaned_data %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100)) %>%
summarise(DISTRICT.NAME, CRISIS.CODEX, percent)
district_percentages <- cleaned_data %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100)) %>%
summarise(DISTRICT.NAME, CRISIS.CODEX, sprintf("%.2f",percent))
tea_data <- read.csv("artf354001_Part2_District_Crisis.csv")
cleaned_data <- tea_data %>%
transform(STUDENT.COUNT = as.numeric(STUDENT.COUNT)) %>%
filter(!is.na(STUDENT.COUNT)&STUDENT.COUNT != -999)
district_percentages <- cleaned_data %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100)) %>%
summarise(DISTRICT.NAME, CRISIS.CODEX, sprintf("%.2f",percent))
district_percentages <- cleaned_data %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100)) %>%
summarise(DISTRICT.NAME, CRISIS.CODEX, round(percent, digits=2))
district_percentages <- cleaned_data %>%
group_by(DISTRICT.NAME) %>%
arrange(sum(STUDENT.COUNT)) %>%
mutate(percent = (STUDENT.COUNT/sum(STUDENT.COUNT) * 100)) %>%
summarize(DISTRICT.NAME, CRISIS.CODEX, round(percent, digits=2)) %>%
head(5)
